<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Compose</title>
<link href="../css/style.css" rel="stylesheet">
<script type="text/javascript"
	src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="../javascript/util.js"></script>
<script type="text/javascript" src="../javascript/digest-auth-request.js"></script>
<script type="text/javascript" src="../javascript/crypto-md5.js"></script>

<script type="text/javascript">
    
    function createUser() {

    	//name and passsword in order to create user 
        var username = encodeURIComponent(document.getElementById("username").value);
        var userpassword = encodeURIComponent(document.getElementById("password").value);
        postData = '{"username":\"' + username + '\","password":\"' + userpassword + '\"}';

        var resultDiv = $("#resultDivContainer");

	// create new digest request object
        var url = '/idm/user/';
	alert('about to send post?');
	var postReq = new digestAuthRequest('POST', url, 'component', 'ZXJpZHMiLCJ');
	alert('after post instruction');
	postReq.request(function(result) { 
                var table = display_json(result);
                $('#resultDivContainer').empty();
                $('#resultDivContainer').append(table);

		  // success callback
		  // data probably a success message
		},function(errorCode) { 
			alert('something went wrong :(...');
		}, postData);

        

    };
</script>
</head>
<body>
	<h2 align="center" style="color: DarkBlue;">Create User</h2>

	<form method="get" action="">
		        
		<table align="center">

			<tr>
				<td>User name:</td>
				<td><input type="text" id="username" name="username" />
					                </td>
			</tr>

			<tr>
				<td>Password:</td>
				<td><input type="password" id="password" name="password" />
					                </td>
			</tr>

			<tr>
				<td><br>&nbsp;</td>
				<td><a class="idmButton" onclick="createUser()">Create</a>
					                </td>
			</tr>

		</table>
		    
	</form>

	<div id="resultDivContainer" align="center"></div>
</body>
</html>
